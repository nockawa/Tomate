<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Struct SmallLock | Tomate </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Struct SmallLock | Tomate ">
      
      <meta name="description" content="An interprocess lock allowing control over concurrent accesses for a given (immaterial) resource.">
      <link rel="icon" href="../images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nockawa/Tomate/new/dev/apiSpec/new?filename=Tomate_SmallLock.md&amp;value=---%0Auid%3A%20Tomate.SmallLock%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/tomate.svg" alt="Tomate">
            Tomate
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Tomate.SmallLock">



  <h1 id="Tomate_SmallLock" data-uid="Tomate.SmallLock" class="text-break">
Struct SmallLock  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L36"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Tomate.html">Tomate</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Tomate.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>An interprocess lock allowing control over concurrent accesses for a given (immaterial) resource.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[PublicAPI]
public struct SmallLock</code></pre>
  </div>







  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetype.equals">ValueType.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetype.gethashcode">ValueType.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetype.tostring">ValueType.ToString()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
  </dd></dl>

  <dl class="typelist extensionMethods">
    <dt>Extension Methods</dt>
    <dd>
  <div>
      <a class="xref" href="Tomate.DisposeExtensions.html#Tomate_DisposeExtensions_DisposeAndNull__1_System_Object___0__">DisposeExtensions.DisposeAndNull&lt;T&gt;(object, ref T)</a>
  </div>
  </dd></dl>



  <h2 id="Tomate_SmallLock_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
As all interprocess compatible types, `SmallLock` is designed to be compatible with storing instances on a <a class="xref" href="Tomate.MemoryManagerOverMMF.html">MemoryManagerOverMMF</a>.
One of the resulted constraint is you have to specify at construction the maximum level of concurrency, resizing data on the fly would make the
implementation of this type way harder.
</p>
<p>
This type would apparently itself to <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.monitor">Monitor</a> but is interprocess compatible (and simpler, as more limited).
</p>
</div>


  <h2 class="section" id="properties">Properties
</h2>


  <a id="Tomate_SmallLock_ConcurrencyCapacity_" data-uid="Tomate.SmallLock.ConcurrencyCapacity*"></a>

  <h3 id="Tomate_SmallLock_ConcurrencyCapacity" data-uid="Tomate.SmallLock.ConcurrencyCapacity">
  ConcurrencyCapacity
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L50"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Get the maximum concurrency level the lock can support.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int ConcurrencyCapacity { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="Tomate_SmallLock_ConcurrencyCapacity_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This value is determined at construction, base on the size of the data segment that is given.
The lock can't support more concurrent operations (e.g.: simultaneous/concurrent calls to <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Enter">Enter()</a> for instance) than given at construction.</p>
</div>




  <a id="Tomate_SmallLock_ConcurrencyCounter_" data-uid="Tomate.SmallLock.ConcurrencyCounter*"></a>

  <h3 id="Tomate_SmallLock_ConcurrencyCounter" data-uid="Tomate.SmallLock.ConcurrencyCounter">
  ConcurrencyCounter
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L55"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Get the current concurrency level, at the time this property is accessed</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int ConcurrencyCounter { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>








  <a id="Tomate_SmallLock_IsEntered_" data-uid="Tomate.SmallLock.IsEntered*"></a>

  <h3 id="Tomate_SmallLock_IsEntered" data-uid="Tomate.SmallLock.IsEntered">
  IsEntered
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L60"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Return <code>true</code> if the lock is taken by <em>someone</em>, <code>false</code> otherwise.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool IsEntered { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>








  <a id="Tomate_SmallLock_LockId_" data-uid="Tomate.SmallLock.LockId*"></a>

  <h3 id="Tomate_SmallLock_LockId" data-uid="Tomate.SmallLock.LockId">
  LockId
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L77"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Get the lockId (the one given during <code>Enter()</code>) that is currently holding the lock</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int LockId { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="Tomate_SmallLock_LockId_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p><code>0</code> means the lock is not held.</p>
</div>




  <a id="Tomate_SmallLock_LockedByProcess_" data-uid="Tomate.SmallLock.LockedByProcess*"></a>

  <h3 id="Tomate_SmallLock_LockedByProcess" data-uid="Tomate.SmallLock.LockedByProcess">
  LockedByProcess
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L69"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Get the id of the processing holding the lock</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int LockedByProcess { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="Tomate_SmallLock_LockedByProcess_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The return id is equivalent to <a class="xref" href="Tomate.IProcessProvider.html#Tomate_IProcessProvider_CurrentProcessId">CurrentProcessId</a> for the calling process.
<code>0</code> means the lock is not held.</p>
</div>




  <h2 class="section" id="methods">Methods
</h2>


  <a id="Tomate_SmallLock_ComputeSegmentSize_" data-uid="Tomate.SmallLock.ComputeSegmentSize*"></a>

  <h3 id="Tomate_SmallLock_ComputeSegmentSize_System_UInt16_" data-uid="Tomate.SmallLock.ComputeSegmentSize(System.UInt16)">
  ComputeSegmentSize(ushort)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L92"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Helper method determining the size of the <a class="xref" href="Tomate.MemorySegment.html">MemorySegment</a> needed to store a <code>SmallLock</code> supporting the given concurrency level</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static int ComputeSegmentSize(ushort concurrencyLevel)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>concurrencyLevel</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.uint16">ushort</a></dt>
    <dd><p>The required concurrency level, that is, the number of processes/threads that would be able to use the <a class="xref" href="Tomate.SmallLock.html">SmallLock</a> instance concurrently.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The size the <code>MemorySegment</code> should be to store one instance.</p>
</dd>
  </dl>











  <a id="Tomate_SmallLock_Create_" data-uid="Tomate.SmallLock.Create*"></a>

  <h3 id="Tomate_SmallLock_Create_Tomate_MemorySegment_" data-uid="Tomate.SmallLock.Create(Tomate.MemorySegment)">
  Create(MemorySegment)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L99"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Create a new instance, stored in the given memory location</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static SmallLock Create(MemorySegment segment)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>segment</code> <a class="xref" href="Tomate.MemorySegment.html">MemorySegment</a></dt>
    <dd><p>The memory segment used to store the instance, the max concurrency will determined by the size of this segment.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Tomate.SmallLock.html">SmallLock</a></dt>
    <dd><p>The created instance.</p>
</dd>
  </dl>











  <a id="Tomate_SmallLock_Enter_" data-uid="Tomate.SmallLock.Enter*"></a>

  <h3 id="Tomate_SmallLock_Enter" data-uid="Tomate.SmallLock.Enter">
  Enter()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L118"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Acquire the lock with an exclusive access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Enter()</code></pre>
  </div>









  <h4 class="section" id="Tomate_SmallLock_Enter_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method will use the process Id and thread Id to identify this access request, if the lock is already hold by someone else, it will wait
an indeterminate amount of time to get it.
Call <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Exit">Exit()</a> to release access.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Tomate.SmallLockConcurrencyExceededException.html">SmallLockConcurrencyExceededException</a></dt>
    <dd><p>Can't enter because the maximum count of concurrency level is already reached.</p>
</dd>
  </dl>



  <a id="Tomate_SmallLock_Exit_" data-uid="Tomate.SmallLock.Exit*"></a>

  <h3 id="Tomate_SmallLock_Exit" data-uid="Tomate.SmallLock.Exit">
  Exit()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L129"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Release the exclusive access on the lock</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Exit()</code></pre>
  </div>









  <h4 class="section" id="Tomate_SmallLock_Exit_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method must be called after a successful <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Enter">Enter()</a></p>
</div>




  <a id="Tomate_SmallLock_Exit_" data-uid="Tomate.SmallLock.Exit*"></a>

  <h3 id="Tomate_SmallLock_Exit_System_Int32_" data-uid="Tomate.SmallLock.Exit(System.Int32)">
  Exit(int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L137"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Release the exclusive access on the lock</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Exit(int lockId)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>lockId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>








  <h4 class="section" id="Tomate_SmallLock_Exit_System_Int32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method must be called after a successful <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_TryEnter_System_Boolean__System_Int32_System_TimeSpan_">TryEnter(out bool, int, TimeSpan)</a> or <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_TryEnter_System_Boolean__System_Boolean__System_Int32_System_TimeSpan_">TryEnter(out bool, out bool, int, TimeSpan)</a></p>
</div>




  <a id="Tomate_SmallLock_Map_" data-uid="Tomate.SmallLock.Map*"></a>

  <h3 id="Tomate_SmallLock_Map_Tomate_MemorySegment_" data-uid="Tomate.SmallLock.Map(Tomate.MemorySegment)">
  Map(MemorySegment)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L107"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Create a C# instance of <code>SmallLock</code> by mapping to an existing (and previously created) one.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static SmallLock Map(MemorySegment segment)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>segment</code> <a class="xref" href="Tomate.MemorySegment.html">MemorySegment</a></dt>
    <dd><p>The memory segment that contains the data of the <code>SmallLock</code> to map against.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Tomate.SmallLock.html">SmallLock</a></dt>
    <dd><p>The instance</p>
</dd>
  </dl>







  <h4 class="section" id="Tomate_SmallLock_Map_Tomate_MemorySegment__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>See <a class="xref" href="Tomate.MemoryManagerOverMMF.html">MemoryManagerOverMMF</a> for more detail of how this is working</p>
</div>




  <a id="Tomate_SmallLock_TryEnter_" data-uid="Tomate.SmallLock.TryEnter*"></a>

  <h3 id="Tomate_SmallLock_TryEnter_System_Boolean__System_Boolean__System_Int32_System_TimeSpan_" data-uid="Tomate.SmallLock.TryEnter(System.Boolean@,System.Boolean@,System.Int32,System.TimeSpan)">
  TryEnter(out bool, out bool, int, TimeSpan)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L203"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Attempt to acquire the lock with an exclusive access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void TryEnter(out bool lockTaken, out bool resumedOnCrashedProcess, int lockId = 0, TimeSpan timeOut = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>lockTaken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>If <code>true</code> the user will have to call <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Exit_System_Int32_">Exit(int)</a> because the lock was successfully taken, <code>false</code> otherwise.
The most likely reason for this arg to be <code>false</code> is we couldn't acquire the lock in due time.</p>
</dd>
    <dt><code>resumedOnCrashedProcess</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>If the previous holder of the lock was another process that crashed without releasing it,
we will be set to <code>true</code> to indicate we couldn't wait the lock to be released to switch to the next in line.</p>
</dd>
    <dt><code>lockId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Id to assign to the lock, if <code>0</code> the thread's <code>ManagedThreadId</code> will be used.</p>
</dd>
    <dt><code>timeOut</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.timespan">TimeSpan</a></dt>
    <dd><p>If the lock couldn't be acquired during this time span, we give up.
<code>default(TimeSpan)</code> will be considered as waiting forever.</p>
</dd>
  </dl>








  <h4 class="section" id="Tomate_SmallLock_TryEnter_System_Boolean__System_Boolean__System_Int32_System_TimeSpan__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Call <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Exit_System_Int32_">Exit(int)</a> to release access.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Tomate.SmallLockConcurrencyExceededException.html">SmallLockConcurrencyExceededException</a></dt>
    <dd><p>Can't enter because the maximum count of concurrency level is already reached.</p>
</dd>
  </dl>



  <a id="Tomate_SmallLock_TryEnter_" data-uid="Tomate.SmallLock.TryEnter*"></a>

  <h3 id="Tomate_SmallLock_TryEnter_System_Boolean__System_Int32_System_TimeSpan_" data-uid="Tomate.SmallLock.TryEnter(System.Boolean@,System.Int32,System.TimeSpan)">
  TryEnter(out bool, int, TimeSpan)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L180"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Attempt to acquire the lock with an exclusive access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void TryEnter(out bool lockTaken, int lockId = 0, TimeSpan timeOut = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>lockTaken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>If <code>true</code> the user will have to call <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Exit_System_Int32_">Exit(int)</a> because the lock was successfully taken, <code>false</code> otherwise.
The most likely reason for this arg to be <code>false</code> is we couldn't acquire the lock in due time.</p>
</dd>
    <dt><code>lockId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Id to assign to the lock, if <code>0</code> the thread's <code>ManagedThreadId</code> will be used.</p>
</dd>
    <dt><code>timeOut</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.timespan">TimeSpan</a></dt>
    <dd><p>If the lock couldn't be acquired during this time span, we give up.
<code>default(TimeSpan)</code> will be considered as waiting forever.</p>
</dd>
  </dl>








  <h4 class="section" id="Tomate_SmallLock_TryEnter_System_Boolean__System_Int32_System_TimeSpan__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Call <a class="xref" href="Tomate.SmallLock.html#Tomate_SmallLock_Exit_System_Int32_">Exit(int)</a> to release access.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Tomate.SmallLockConcurrencyExceededException.html">SmallLockConcurrencyExceededException</a></dt>
    <dd><p>Can't enter because the maximum count of concurrency level is already reached.</p>
</dd>
  </dl>




</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/SmallLock.cs/#L36" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright (c) Loïc Baumann
        </div>
      </div>
    </footer>
  </body>
</html>
