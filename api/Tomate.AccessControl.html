<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Struct AccessControl | Tomate </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Struct AccessControl | Tomate ">
      
      <meta name="description" content="Synchronization type that allows multiple concurrent shared access or one exclusive. Doesn&#39;t allow re-entrant calls, burn CPU cycle on wait, using  Costs 8 bytes of data.">
      <link rel="icon" href="../images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nockawa/Tomate/new/dev/apiSpec/new?filename=Tomate_AccessControl.md&amp;value=---%0Auid%3A%20Tomate.AccessControl%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/tomate.svg" alt="Tomate">
            Tomate
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Tomate.AccessControl">



  <h1 id="Tomate_AccessControl" data-uid="Tomate.AccessControl" class="text-break">
Struct AccessControl  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L12"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Tomate.html">Tomate</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Tomate.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Synchronization type that allows multiple concurrent shared access or one exclusive.
Doesn't allow re-entrant calls, burn CPU cycle on wait, using <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.spinwait">SpinWait</a>
Costs 8 bytes of data.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[PublicAPI]
public struct AccessControl</code></pre>
  </div>







  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetype.equals">ValueType.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetype.gethashcode">ValueType.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetype.tostring">ValueType.ToString()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
  </dd></dl>

  <dl class="typelist extensionMethods">
    <dt>Extension Methods</dt>
    <dd>
  <div>
      <a class="xref" href="Tomate.DisposeExtensions.html#Tomate_DisposeExtensions_DisposeAndNull__1_System_Object___0__">DisposeExtensions.DisposeAndNull&lt;T&gt;(object, ref T)</a>
  </div>
  </dd></dl>





  <h2 class="section" id="properties">Properties
</h2>


  <a id="Tomate_AccessControl_LockedById_" data-uid="Tomate.AccessControl.LockedById*"></a>

  <h3 id="Tomate_AccessControl_LockedById" data-uid="Tomate.AccessControl.LockedById">
  LockedById
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L37"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns the Id of the current Process/Thread that own the lock</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int LockedById { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="Tomate_AccessControl_LockedById_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p><code>0</code> is returned if the Access Control is not locked.
The returned value is a xor combination of the Process Id and the threadId and should be used for information purpose only.</p>
</div>




  <a id="Tomate_AccessControl_SharedUsedCounter_" data-uid="Tomate.AccessControl.SharedUsedCounter*"></a>

  <h3 id="Tomate_AccessControl_SharedUsedCounter" data-uid="Tomate.AccessControl.SharedUsedCounter">
  SharedUsedCounter
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L42"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns the count of concurrent accesses.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int SharedUsedCounter { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="Tomate_AccessControl_Construct_" data-uid="Tomate.AccessControl.Construct*"></a>

  <h3 id="Tomate_AccessControl_Construct_Tomate_MemorySegment_Tomate_AccessControl__" data-uid="Tomate.AccessControl.Construct(Tomate.MemorySegment{Tomate.AccessControl})">
  Construct(MemorySegment&lt;AccessControl&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L53"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Constructor an instance stored in the given memory segment</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static ref AccessControl Construct(MemorySegment&lt;AccessControl&gt; segment)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>segment</code> <a class="xref" href="Tomate.MemorySegment-1.html">MemorySegment</a>&lt;<a class="xref" href="Tomate.AccessControl.html">AccessControl</a>&gt;</dt>
    <dd><p>The memory segment where the instance will be stored.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Tomate.AccessControl.html">AccessControl</a></dt>
    <dd><p>The ref to the instance</p>
</dd>
  </dl>











  <a id="Tomate_AccessControl_DemoteFromExclusiveAccess_" data-uid="Tomate.AccessControl.DemoteFromExclusiveAccess*"></a>

  <h3 id="Tomate_AccessControl_DemoteFromExclusiveAccess" data-uid="Tomate.AccessControl.DemoteFromExclusiveAccess">
  DemoteFromExclusiveAccess()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L67"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Demote from exclusive to shared access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void DemoteFromExclusiveAccess()</code></pre>
  </div>









  <h4 class="section" id="Tomate_AccessControl_DemoteFromExclusiveAccess_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The calling process/thread must be in a valid exclusive state for this method to be called.</p>
</div>




  <a id="Tomate_AccessControl_EnterExclusiveAccess_" data-uid="Tomate.AccessControl.EnterExclusiveAccess*"></a>

  <h3 id="Tomate_AccessControl_EnterExclusiveAccess" data-uid="Tomate.AccessControl.EnterExclusiveAccess">
  EnterExclusiveAccess()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L79"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enter an exclusive access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void EnterExclusiveAccess()</code></pre>
  </div>









  <h4 class="section" id="Tomate_AccessControl_EnterExclusiveAccess_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>There can be only one process/thread being in the exclusive access state at a given time.
If the <code>AccessControl</code> instance is being in shared mode or exclusive hold by another process/thread, the calling thread will wait until this call can
be satisfied.
Note that this method is not reentrant, if somewhere lower in the calling stack a method successfully entered an exclusive access, this call will
wait indefinitely.</p>
</div>




  <a id="Tomate_AccessControl_EnterSharedAccess_" data-uid="Tomate.AccessControl.EnterSharedAccess*"></a>

  <h3 id="Tomate_AccessControl_EnterSharedAccess" data-uid="Tomate.AccessControl.EnterSharedAccess">
  EnterSharedAccess()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L144"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enter a shared access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void EnterSharedAccess()</code></pre>
  </div>









  <h4 class="section" id="Tomate_AccessControl_EnterSharedAccess_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
Shared access is typically used to allow concurrent readers, that is, many processes/threads can concurrently enter a shared access.
If there is already an exclusive access being hold, the calling thread will wait until it can enter the shared access (which is the exclusive access
to be released).
While in shared access, if a process/thread attempts to enter an exclusive access calling <a class="xref" href="Tomate.AccessControl.html#Tomate_AccessControl_EnterExclusiveAccess">EnterExclusiveAccess()</a>,the calling thread will
wait until there is no shared access at all to satisfy the request.
</p>
<p>
You have the possibility to attempt transforming your shared access to an exclusive one by calling <a class="xref" href="Tomate.AccessControl.html#Tomate_AccessControl_TryPromoteToExclusiveAccess">TryPromoteToExclusiveAccess()</a>. If the
calling thread is the only shared access the promotion will succeed and the thread will then become the exclusive owner. If there is at least another
process/thread holding a shared access, the promotion attempt will fail.
</p>
<p>
Be sure to call <a class="xref" href="Tomate.AccessControl.html#Tomate_AccessControl_ExitSharedAccess">ExitSharedAccess()</a> when you want to release the access. 
</p>
</div>




  <a id="Tomate_AccessControl_ExitExclusiveAccess_" data-uid="Tomate.AccessControl.ExitExclusiveAccess*"></a>

  <h3 id="Tomate_AccessControl_ExitExclusiveAccess" data-uid="Tomate.AccessControl.ExitExclusiveAccess">
  ExitExclusiveAccess()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L176"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Release the exclusive access on the calling process/thread</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void ExitExclusiveAccess()</code></pre>
  </div>













  <a id="Tomate_AccessControl_ExitSharedAccess_" data-uid="Tomate.AccessControl.ExitSharedAccess*"></a>

  <h3 id="Tomate_AccessControl_ExitSharedAccess" data-uid="Tomate.AccessControl.ExitSharedAccess">
  ExitSharedAccess()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L184"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Exit a previously entered shared access</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void ExitSharedAccess()</code></pre>
  </div>









  <h4 class="section" id="Tomate_AccessControl_ExitSharedAccess_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>A process/thread calling <a class="xref" href="Tomate.AccessControl.html#Tomate_AccessControl_EnterSharedAccess">EnterSharedAccess()</a> must call this method to release the shared access.</p>
</div>




  <a id="Tomate_AccessControl_Reset_" data-uid="Tomate.AccessControl.Reset*"></a>

  <h3 id="Tomate_AccessControl_Reset" data-uid="Tomate.AccessControl.Reset">
  Reset()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L189"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Reset the usage of the instance to its default state.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Reset()</code></pre>
  </div>













  <a id="Tomate_AccessControl_TryPromoteToExclusiveAccess_" data-uid="Tomate.AccessControl.TryPromoteToExclusiveAccess*"></a>

  <h3 id="Tomate_AccessControl_TryPromoteToExclusiveAccess" data-uid="Tomate.AccessControl.TryPromoteToExclusiveAccess">
  TryPromoteToExclusiveAccess()
  <a class="header-action link-secondary" title="View source" href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L205"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Attempt to promote a previously set shared access to exclusive</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool TryPromoteToExclusiveAccess()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p><code>true</code> if the calling process/thread could switch to exclusive, <code>false</code> if the attempt failed (other processes/threads are also holding a
shared access).</p>
</dd>
  </dl>







  <h4 class="section" id="Tomate_AccessControl_TryPromoteToExclusiveAccess_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method will either switch from shared to exclusive or stay shared. Based on the outcome, you have to call the corresponding Exit method.</p>
</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nockawa/Tomate/blob/dev/src/Tomate/Synchronization/AccessControl.cs/#L12" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright (c) Loïc Baumann
        </div>
      </div>
    </footer>
  </body>
</html>
